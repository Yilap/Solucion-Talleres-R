---
title: "Taller 2 - Andr√©s D√≠az, Yilmer Palacios"
author: "Andr√©s D√≠az - Cod: 200610686, Yilmer Palacios - Cod: 202214473"
date: "2024-02-17"
output:
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(encoding = "utf-8")

```

```{r Preparaci√≥n de paquetes, message=FALSE, warning=FALSE, include=FALSE}

install.packages("openxlsx")
library(openxlsx)

```
# Primer Punto

## Ustedes cuentan con varias bases de datos que cuenta con informaci√≥n del precio del Petr√≥leo Brent, del Gas Natural, Carb√≥n, Gasolina Motor Corriente y finalmente del IPC para Colombia desde el 2000 hasta el 2024 con una periodicidad mensual. Cada una de estas bases de datos toma el nombre del bien al que hacen referencia junto con el sufijo .csv. Por ejemplo, cuentan con ‚ÄúCarb√≥n.csv‚Äù y as√≠ con los dem√°s bienes. Cada una de estas bases cuenta con tres columnas, una primera columna con la fecha mensualizada, una segunda columna con el precio del bien para Colombia y una tercera columna con el precio del bien promedio en el mundo. En su trabajo como analistas de informaci√≥n se les solicita realizar un reporte sobre estas series. Para ello, su jefa les solicita realizar las siguientes tareas:

### 1.1. Establezcan un c√≥digo que les permita cargar en el programa R las bases de datos de los diferentes precios de combustibles.

```{r 1.1, include=FALSE}

# Definimos directorio
getwd()
setwd("C:/Users/Yilmer Palacios/Desktop/Soluci√≥n Talleres R/Solucion-Talleres-R/Taller 2")

# Cargamos datos

IPC <- read.table("1.2.5.IPC_Serie_variaciones.csv", header = TRUE, sep = ",")
IPC$Mes.A√±o <- as.character(IPC$Mes.A√±o, "%Y%m")
IPC$Mes.A√±o <- paste(substr(IPC$Mes.A√±o, start = 1, stop = 4),"-",substr(IPC$Mes.A√±o, start = 5, stop = 10))
IPC$Mes.A√±o <- 
IPC$Mes.A√±o <- as.Date(IPC$Mes.A√±o, "%Y - %m")

?as.Date

Carbon <- read.table("precios_carbon.csv", header = TRUE, sep = ",")
Carbon$fecha <- as.Date(Carbon$fecha, "%Y-%m-%d")

Gas <- read.table("precios_gas_natural.csv", header = TRUE, sep = ",")
Gas$fecha <- as.Date(Gas$fecha, "%Y-%m-%d")

Gasolina <- read.table("precios_gasolina.csv", header = TRUE, sep = ",")
Gasolina$fecha <- as.Date(Gasolina$fecha, "%Y-%m-%d")

Crudo <- read.table("precios_petroleo.csv", header = TRUE, sep = ",")
Crudo$fecha <- as.Date(Crudo$fecha, "%Y-%m-%d")


```

### 1.2. Realicen una exploraci√≥n inicial de la base de datos. Para esto, para cada una de las bases de datos describan la misma. Es decir, redacten un breve p√°rrafo comentando qu√© variables contiene la base de datos, el n√∫mero de observaciones, el periodo de tiempo que comprende, el tipo de las variables, entre otros aspectos relevantes.

```{r}

#variables en las bases
#numeros de observaciones
#periodo de tiempo comprendido
#tipo de variables

str(Carbon$fecha)
colnames(Carbon)
names(Carbon)

apply(Crudo)

summary(Crudo)

```
## Explorando las bases de datos de los precios de forma individual identifican que no todas tienen el mismo n√∫mero de observaciones. Un hecho muy com√∫n cuando se trabaja con datos en formato panel es que algunas fechas para algunos productos no est√©n en la base de datos, es decir, hay fechas faltantes. A continuaci√≥n, ustedes quieren ‚Äúexplicitar‚Äù las fechas faltantes.

### 1.3. Creen una funci√≥n que tenga como par√°metros un dataframe, una columna de fecha y una columna de precio, posteriormente, la funci√≥n tiene que agregar las fechas faltantes en la columna de fecha y a√±adir un missing value en su valor correspondiente en el precio para esta fecha explicitada. Finalmente, tiene que retornar el dataframe con las fechas completas.

```{r}

```

### 1.4. Apliquen la funci√≥n anterior a cada uno de los precios en la base de datos.

```{r}

```

### 1.5. Realicen una uni√≥n de cada una de los datasets cargados que les permita juntar los precios y fechas en una misma base de datos.

```{r}

```

### 1.6. Realice las siguientes transformaciones de los datos: para la fecha transf√≥rmenla de formato mm/dd/aa a un formato dd/mm/aa, revisen que las variables num√©ricas sean identificadas de tal forma y aseg√∫rense de que tengan un formato de dos decimales.

```{r}

```

### 1.7. Utilizando los operadores y funciones de la librer√≠a dplyr, creen respectivamente columnas que correspondan al mes y a√±o de las observaciones. Filtren la base de datos para preservar √∫nicamente las observaciones posteriores a enero del 2005 utilizando las columnas mes y a√±o creadas anteriormente. Finalmente, eliminen de la base de datos las columnas asociadas a los precios de los combustibles promedio en el mundo.

```{r}

```

### 1.8. Revisen ¬øQu√© porcentaje de la base de datos cuenta con valores faltantes en el precio de alg√∫n bien? Sustituyan estos valores faltantes con el precio promedio de ese bien.

```{r}

```

### 1.9. Agrupen la informaci√≥n de los precios a los valores promedios por mes y a√±o. Por otra parte, para poder realizar comparaciones correctas entre precios es importante convertir los precios nominales en precios reales (constantes de un a√±o base), pues permite controlar por el efecto inflacionario. Para transformarlo, se normaliza por la diferencia entre los √çndices de Precios al Consumidor de la forma:

#### (1) ùëÉùëüùëíùëéùëô,ùë° = ùëÉùëõùëúùëöùëñùëõùëéùëô,ùë° ‚àó ùêºùëÉùê∂ùëèùëéùë†ùëí ùêºùëÉùê∂ùë°

### Donde ùêºùëÉùê∂ùëèùëéùë†ùëí hace referencia al IPC de un a√±o-mes espec√≠fico. ùêºùëÉùê∂ùë° al IPC del a√±o-mes t sobre el cual se quiere convertir el precio nominal del a√±o-mes t (ùëÉùëõùëúùëöùëñùëõùëéùëô,ùë°).

```{r}

```

### 1.10. Creen una funci√≥n que tenga como par√°metros: una columna de una serie de un precio de la base de datos, un a√±o, un mes y la columna del IPC de Colombia. Posteriormente, la funci√≥n debe crear una nueva columna cuyo nombre sea: el ‚Äúnombre del bien‚Äù + ‚Äúa√±o base‚Äù + ‚Äúmes base‚Äù + el sufijo ‚Äú_transformada‚Äù. Esta columna debe ser la transformaci√≥n de valores nominales de la serie a valores reales con base en el a√±o que toma como par√°metro la funci√≥n. Es decir, utilizando la ecuaci√≥n (1) tendr√°n que consolidar una funci√≥n que transforme los valores nominales en precios constantes con base en cualquier mes-a√±o.

```{r}

```

### 1.11. Apliquen la funci√≥n que desarroll√≥ en el literal anterior para todos los bienes que defini√≥ en la base de datos, pueden usar cualquier a√±o-mes base, lo importante es que sean expl√≠citos.

```{r}

```

### 1.12. Exporte la base de datos consolidada en un archivo .csvSegundo punto

```{r}

```

# Punto 2

## A partir de la base de datos consolidada en el punto anterior, este punto busca explorar y analizar los datos consolidados. Para esto, realicen lo siguiente:

### 2.1. Presenten una tabla de estad√≠sticas descriptivas donde evidencien el n√∫mero de observaciones, promedio, min, max, desviaci√≥n est√°ndar de los precios nominales y reales de los combustibles. Expliquen e interpreten en el documento los valores m√°s importantes de la tabla.

```{r}

```

### 2.2. Presenten una gr√°fica de dispersi√≥n de puntos (scatter) donde en el eje X est√© el precio del carb√≥n y en el eje Y el precio de la gasolina, ambos reales sobre un a√±o determinado, a√±adan una l√≠nea de ajuste lineal, t√≠tulo, labels y dem√°s elementos que permitan una gr√°fica autocontenida. Expliquen e interpreten en el documento los elementos m√°s importantes de la base de datos.

```{r}

```

### 2.3. Presenten una gr√°fica de serie de tiempo con el precio real del Carb√≥n, Gas Natural, Petr√≥leo y Gasolina Corriente para un mismo a√±o, aseg√∫rense de que tenga el t√≠tulo, labels, colores y dem√°s elementos que permitan una gr√°fica autocontenida. Expliquen e interpreten en el documento los elementos m√°s importantes de la base de datos.

```{r}

```

###2.4. Realicen una visualizaci√≥n de tipo ‚Äúheatmap‚Äù donde puedan identificar el cambio mensual del precio del Carb√≥n, Petr√≥leo y Gas Natural para cada uno de los a√±os

```{r}

```
